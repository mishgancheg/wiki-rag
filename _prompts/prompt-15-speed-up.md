–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –Ω—É–∂–Ω–æ
const results: PipelineResult[] = [];
–≤ server/api/indexing/pipeline.ts

=============================================

–ó–∞–º–µ–Ω–∏ –∫–Ω–æ–ø–∫—É  Load Spaces –Ω–∞ –∫–Ω–æ–ø–∫—É Refresh (–∏–∫–æ–Ω–∫–æ–π, –Ω–µ —Ç–µ–∫—Å—Ç–æ–º) –∏ —Ä–∞–∑–º–µ—Å—Ç–∏ –µ–µ –ø—Ä–∞–≤–µ–µ select-–∞
–ó–∞–≥—Ä—É–∑–∫—É –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç –Ω–∞—á–∏–Ω–∞–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

=============================================

–ù–∞ –∑–∞–∫–ª–∞–¥–∫–µ `Wiki Indexing Management` –¥–æ–±–∞–≤—å –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –Ω–∏–∂–µ–ª–µ–∂–∞—â–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –ø—Ä–∏ –î–í–û–ô–ù–û–ú –∫–ª–∏–∫–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –≤–µ—Ç–∫–∏

=============================================
–í —á–∞—Ç–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏—Å—Ç–æ—á–Ω–∏–∫–µ –≤ –≤–∏–¥–µ.
–∏—Å—Ç–æ—á–Ω–∏–∫–∏: 504092290 (50%), 504081489 (50%), 455385852 (51%), 504092290 (51%), 533398570 (51%), 539017461 (51%)

–ù–æ —Ü–∏—Ñ—Ä—ã —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –≤ % —Ç—É—Ç –Ω–µ –≤–µ—Ä–Ω—ã. –¢–∞–∫ –∫–∞–∫ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ, –≤ –¥–∞–Ω–Ω—ã—Ö —É–∫–∞–∑–∞–Ω–∞ –∫–æ—Å–∏–Ω—É—Å–Ω–∞—è –±–ª–∏–∑–æ—Å—Ç—å –æ—Ç 0 (—Å–∞–º—ã–π –±–ª–∏–∑–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç) –¥–æ 1 - —Å–∞–º—ã–π –ø–ª–æ—Ö–æ–π.

–ò—Å–ø—Ä–∞–≤—å - –Ω–∞–¥–æ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å CS —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ 3 –∑–Ω–∞–∫–æ–≤.

=============================================
–ò wiki_id –æ–±–æ—Ä–∞—á–∏–≤–∞–π –≤ —Å—Å—ã–ª–∫—É, –ø–æ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ wiki –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ

=============================================
–ù–∞ –∑–∞–∫–ª–∞–¥–∫–µ `Wiki Indexing Management` –Ω–∞–¥ –æ–±–ª–∞—Å—Ç—å—é –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ä–µ–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü, –¥–æ–±–∞–≤—å –∫–Ω–æ–ø–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è –≤—Å–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
=============================================
–†–∞–∑–º–µ—Å—Ç–∏ –∫–Ω–æ–ø–∫—É Expand All –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –æ–±–ª–∞—Å—Ç–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –ø–æ–∫–∞–∑—ã–≤–∞–π —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –µ—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –ø–æ–∫–∞–∑–∞ –∏ –µ—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ –≤—Ç–æ—Ä–æ–º —É—Ä–æ–≤–Ω–µ (—Ç–æ –µ—Å—Ç—å, –µ—Å—Ç—å, —á—Ç–æ —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å )
=============================================
–ù–ï –≤–∏–∂—É –∫–Ω–æ–ø–∫—É —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –≤—Å–µ—Ö –≤–µ—Ç–æ–∫ –¥–µ—Ä–µ–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü. –•–æ—Ç—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –µ—Å—Ç—å
=============================================
–ü–µ—Ä–µ–º–µ—Å—Ç–∏ –∫–Ω–æ–ø–∫—É "üßπ –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é" –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–∫–ª–∞–¥–∫–∏ Chat –∏ –æ—Å—Ç–∞–≤—å —Ç–∞–º —Ç–æ–ª—å–∫–æ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é –∏–∫–æ–Ω–∫—É —Å —Ç–∞–π—Ç–ª–æ–º  "üßπ –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é"
–ê –æ–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ —É–º–µ–Ω—å—à–∏ –ø–æ —à–∏—Ä–∏–Ω–µ –¥–æ 900px (—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ –ø–æ —Ü–µ–Ω—Ç—Ä—É)
=============================================
–í—ã—Å–æ—Ç–∞ –æ–∫–Ω–∞ —á–∞—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π –ø–æ–¥ –≤—ã—Å–æ—Ç—É —ç–∫—Ä–∞–Ω–∞.
–í–º–µ—Å—Ç–µ —Å–æ –≤—Å–µ–º–∏ –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ —ç–¥–µ–º–µ–Ω—Ç–∞–º–∏ (–∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Ç –ø, –¥–æ–ª–∂–Ω–∞ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –≤—Å—è –≤–∏–¥–∏–º–∞—è –æ–±–ª–∞—Å—Ç—å 
=============================================
–≤—ã–Ω–µ—Å–∏ –∫–æ–¥ –¥–µ—Ç–µ–∫—Ü–∏–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
=============================================
–í –æ—Ç–≤–µ—Ç–µ –±–æ—Ç–∞ —É—Ö–æ–¥–∏—Ç —Ç–∞–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

res.json({
ok: true,
shortIntent: query,
reply,
sources: rag.results.map(r => ({ chunk_id: r.chunk_id, wiki_id: r.wiki_id, similarity: r.similarity })),
});

–ù–æ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö chunk_id –±—ã–≤–∞–µ—Ç –æ–¥–∏ –∏ —Ç–æ—Ç –∂–µ wiki_id

–ü–æ—ç—Ç–æ–º—É –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –≤ —á–∞—Ç–µ
```
–∏—Å—Ç–æ—á–Ω–∏–∫–∏: 482534711 (CS=0.277), 504072863 (CS=0.277), 482534711 (CS=0.367), 482534711 (CS=0.384), 482534711 (CS=0.392), 482534711 (CS=0.400)
```

–Ω–∞–¥–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ wiki_id. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–∞–∫:

```
–∏—Å—Ç–æ—á–Ω–∏–∫–∏: 482534711 (1345 - CS=0.277, 1346 - CS=0.367, 1347 - CS=0.384, 1348 - CS=0.392, 1349 - CS=0.400), 504072863 (CS=0.277)
```
(–∑–¥–µ—Å—å 1345 -- 1349 - —ç—Ç–æ chunk_id)


=============================================
–†–∞–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ RAG –º–æ–≥—É—Ç –±—ã—Ç—å –±–æ–ª—å—à–∏–º–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏.
–í–æ—Ç —Ç—É—Ç 
<div style="white-space: pre-wrap; font-family: monospace; background: #f8f9fa; padding: 0.5rem; border-radius: 4px; font-size: 0.9rem;">
                    ${result.chunk}
                </div>

—Å–¥–µ–ª–∞–π —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ/—Å–∫—Ä—ã—Ç–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ (—Å–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
–ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—É—é —á–∞—Å—Ç—å - –ø–æ–∫–∞–∑—ã–≤–∞–π –≤—Å–µ–≥–¥–∞

=============================================
–í –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Å—Ç—É–ø–∞—é—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–∏—Å–∫–∞ RAG (—Ç–∏–ø RagSearchResponse) –≤ –º–∞—Å—Å–∏–≤–µ results: RagSearchResultItem[] –≤ –∫–∞–∂–¥–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ –µ—Å—Ç—å question: string | null;

–ï—Å–ª–∏ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –ø—É—Å—Ç–æ, —Ç–æ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–∏—Å–∫–∞ RAG –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —É–∫–∞–∑—ã–≤–∞–π "–ù–∞–π–¥–µ–Ω–æ –ø–æ –≤–æ–ø—Ä–æ—Å—É: <question>"
–ê –µ—Å–ª–∏ question = null, —Ç–æ —É–∫–∞–∑—ã–≤–∞–π
"–ù–∞–π–¥–µ–Ω–æ –ø–æ —Ç–µ–∫—Å—Ç—É —á–∞–Ω–∫–∞"
=============================================
–î–æ–±–∞–≤—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ LocalStorage –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–∫–ª–∞–¥–∫–∏ –æ—Ç–∫—Ä—ã—Ç–æ–π.
–ò –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

–î–æ–±–∞–≤—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ LocalStorage —Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—è –≤–≤–æ–¥–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–∏—Å–∫–∞ –ø–æ RAG.
–ò –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

–î–æ–±–∞–≤—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ LocalStorage —Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—è –≤–≤–æ–¥–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Chat.
–ò –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
